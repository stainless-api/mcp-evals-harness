/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { ClosedEnum } from "../types/enums.js";
import {
  BalanceTransaction,
  BalanceTransaction$zodSchema,
} from "./balancetransaction.js";
import { Charge, Charge$zodSchema } from "./charge.js";
import {
  PaymentFlowsPaymentIntentPresentmentDetails,
  PaymentFlowsPaymentIntentPresentmentDetails$zodSchema,
} from "./paymentflowspaymentintentpresentmentdetails.js";
import { PaymentIntent, PaymentIntent$zodSchema } from "./paymentintent.js";
import {
  RefundDestinationDetails,
  RefundDestinationDetails$zodSchema,
} from "./refunddestinationdetails.js";
import {
  RefundNextAction,
  RefundNextAction$zodSchema,
} from "./refundnextaction.js";

/**
 * Provides the reason for why the refund is pending. Possible values are: `processing`, `insufficient_funds`, or `charge_pending`.
 */
export const PendingReason = {
  ChargePending: "charge_pending",
  InsufficientFunds: "insufficient_funds",
  Processing: "processing",
} as const;
/**
 * Provides the reason for why the refund is pending. Possible values are: `processing`, `insufficient_funds`, or `charge_pending`.
 */
export type PendingReason = ClosedEnum<typeof PendingReason>;

export const PendingReason$zodSchema = z.enum([
  "charge_pending",
  "insufficient_funds",
  "processing",
]).describe(
  "Provides the reason for why the refund is pending. Possible values are: `processing`, `insufficient_funds`, or `charge_pending`.",
);

/**
 * Reason for the refund, which is either user-provided (`duplicate`, `fraudulent`, or `requested_by_customer`) or generated by Stripe internally (`expired_uncaptured_charge`).
 */
export const RefundReason = {
  Duplicate: "duplicate",
  ExpiredUncapturedCharge: "expired_uncaptured_charge",
  Fraudulent: "fraudulent",
  RequestedByCustomer: "requested_by_customer",
} as const;
/**
 * Reason for the refund, which is either user-provided (`duplicate`, `fraudulent`, or `requested_by_customer`) or generated by Stripe internally (`expired_uncaptured_charge`).
 */
export type RefundReason = ClosedEnum<typeof RefundReason>;

export const RefundReason$zodSchema = z.enum([
  "duplicate",
  "expired_uncaptured_charge",
  "fraudulent",
  "requested_by_customer",
]).describe(
  "Reason for the refund, which is either user-provided (`duplicate`, `fraudulent`, or `requested_by_customer`) or generated by Stripe internally (`expired_uncaptured_charge`).",
);

/**
 * Refund objects allow you to refund a previously created charge that isn't
 *
 * @remarks
 * refunded yet. Funds are refunded to the credit or debit card that's
 * initially charged.
 *
 * Related guide: [Refunds](https://docs.stripe.com/refunds)
 */
export type Refund = {
  amount: number;
  balance_transaction?: BalanceTransaction | undefined;
  charge?: Charge | undefined;
  created: number;
  currency: string;
  description?: string | undefined;
  destination_details?: RefundDestinationDetails | undefined;
  failure_balance_transaction?: BalanceTransaction | undefined;
  failure_reason?: string | undefined;
  id: string;
  instructions_email?: string | undefined;
  metadata?: { [k: string]: string } | null | undefined;
  next_action?: RefundNextAction | undefined;
  payment_intent?: PaymentIntent | undefined;
  pending_reason?: PendingReason | undefined;
  presentment_details?: PaymentFlowsPaymentIntentPresentmentDetails | undefined;
  reason?: RefundReason | null | undefined;
  receipt_number?: string | null | undefined;
  source_transfer_reversal?: string | null | undefined;
  status?: string | null | undefined;
  transfer_reversal?: string | null | undefined;
};

export const Refund$zodSchema: z.ZodType<Refund> = z.object({
  amount: z.int(),
  balance_transaction: z.lazy(() => BalanceTransaction$zodSchema).optional(),
  charge: z.lazy(() => Charge$zodSchema).optional(),
  created: z.int(),
  currency: z.string(),
  description: z.string().optional(),
  destination_details: RefundDestinationDetails$zodSchema.optional(),
  failure_balance_transaction: z.lazy(() => BalanceTransaction$zodSchema)
    .optional(),
  failure_reason: z.string().optional(),
  id: z.string(),
  instructions_email: z.string().optional(),
  metadata: z.record(z.string(), z.string()).nullable().optional(),
  next_action: RefundNextAction$zodSchema.optional(),
  payment_intent: z.lazy(() => PaymentIntent$zodSchema).optional(),
  pending_reason: PendingReason$zodSchema.optional(),
  presentment_details: PaymentFlowsPaymentIntentPresentmentDetails$zodSchema
    .optional(),
  reason: RefundReason$zodSchema.nullable().optional(),
  receipt_number: z.string().nullable().optional(),
  source_transfer_reversal: z.string().nullable().optional(),
  status: z.string().nullable().optional(),
  transfer_reversal: z.string().nullable().optional(),
}).describe(
  "Refund objects allow you to refund a previously created charge that isn't\nrefunded yet. Funds are refunded to the credit or debit card that's\ninitially charged.\n\nRelated guide: [Refunds](https://docs.stripe.com/refunds)",
);
