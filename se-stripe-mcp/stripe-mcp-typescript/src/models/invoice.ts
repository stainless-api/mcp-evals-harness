/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { ClosedEnum } from "../types/enums.js";
import { Account, Account$zodSchema } from "./account.js";
import { Address, Address$zodSchema } from "./address.js";
import { ApiErrors, ApiErrors$zodSchema } from "./apierrors.js";
import { Application, Application$zodSchema } from "./application.js";
import { AutomaticTax, AutomaticTax$zodSchema } from "./automatictax.js";
import { BankAccount, BankAccount$zodSchema } from "./bankaccount.js";
import {
  BillingBillResourceInvoicingParentsInvoiceParent,
  BillingBillResourceInvoicingParentsInvoiceParent$zodSchema,
} from "./billingbillresourceinvoicingparentsinvoiceparent.js";
import {
  BillingBillResourceInvoicingTaxesTax,
  BillingBillResourceInvoicingTaxesTax$zodSchema,
} from "./billingbillresourceinvoicingtaxestax.js";
import {
  ConnectAccountReference,
  ConnectAccountReference$zodSchema,
} from "./connectaccountreference.js";
import { Customer, Customer$zodSchema } from "./customer.js";
import { Discount, Discount$zodSchema } from "./discount.js";
import {
  DiscountsResourceDiscountAmount,
  DiscountsResourceDiscountAmount$zodSchema,
} from "./discountsresourcediscountamount.js";
import { InvoicePayment, InvoicePayment$zodSchema } from "./invoicepayment.js";
import {
  InvoiceSettingCustomField,
  InvoiceSettingCustomField$zodSchema,
} from "./invoicesettingcustomfield.js";
import {
  InvoicesPaymentSettings,
  InvoicesPaymentSettings$zodSchema,
} from "./invoicespaymentsettings.js";
import {
  InvoicesResourceConfirmationSecret,
  InvoicesResourceConfirmationSecret$zodSchema,
} from "./invoicesresourceconfirmationsecret.js";
import {
  InvoicesResourceFromInvoice,
  InvoicesResourceFromInvoice$zodSchema,
} from "./invoicesresourcefrominvoice.js";
import {
  InvoicesResourceInvoiceRendering,
  InvoicesResourceInvoiceRendering$zodSchema,
} from "./invoicesresourceinvoicerendering.js";
import {
  InvoicesResourceInvoiceTaxId,
  InvoicesResourceInvoiceTaxId$zodSchema,
} from "./invoicesresourceinvoicetaxid.js";
import {
  InvoicesResourcePretaxCreditAmount,
  InvoicesResourcePretaxCreditAmount$zodSchema,
} from "./invoicesresourcepretaxcreditamount.js";
import {
  InvoicesResourceShippingCost,
  InvoicesResourceShippingCost$zodSchema,
} from "./invoicesresourceshippingcost.js";
import {
  InvoicesResourceStatusTransitions,
  InvoicesResourceStatusTransitions$zodSchema,
} from "./invoicesresourcestatustransitions.js";
import {
  InvoiceThresholdReason,
  InvoiceThresholdReason$zodSchema,
} from "./invoicethresholdreason.js";
import { LineItem, LineItem$zodSchema } from "./lineitem.js";
import { PaymentMethod, PaymentMethod$zodSchema } from "./paymentmethod.js";
import { Shipping, Shipping$zodSchema } from "./shipping.js";
import { TaxId, TaxId$zodSchema } from "./taxid.js";
import { TaxRate, TaxRate$zodSchema } from "./taxrate.js";
import {
  TestHelpersTestClock,
  TestHelpersTestClock$zodSchema,
} from "./testhelperstestclock.js";

/**
 * Indicates the reason why the invoice was created.
 *
 * @remarks
 *
 * * `manual`: Unrelated to a subscription, for example, created via the invoice editor.
 * * `subscription`: No longer in use. Applies to subscriptions from before May 2018 where no distinction was made between updates, cycles, and thresholds.
 * * `subscription_create`: A new subscription was created.
 * * `subscription_cycle`: A subscription advanced into a new period.
 * * `subscription_threshold`: A subscription reached a billing threshold.
 * * `subscription_update`: A subscription was updated.
 * * `upcoming`: Reserved for upcoming invoices created through the Create Preview Invoice API or when an `invoice.upcoming` event is generated for an upcoming invoice on a subscription.
 */
export const BillingReason = {
  AutomaticPendingInvoiceItemInvoice: "automatic_pending_invoice_item_invoice",
  Manual: "manual",
  QuoteAccept: "quote_accept",
  Subscription: "subscription",
  SubscriptionCreate: "subscription_create",
  SubscriptionCycle: "subscription_cycle",
  SubscriptionThreshold: "subscription_threshold",
  SubscriptionUpdate: "subscription_update",
  Upcoming: "upcoming",
} as const;
/**
 * Indicates the reason why the invoice was created.
 *
 * @remarks
 *
 * * `manual`: Unrelated to a subscription, for example, created via the invoice editor.
 * * `subscription`: No longer in use. Applies to subscriptions from before May 2018 where no distinction was made between updates, cycles, and thresholds.
 * * `subscription_create`: A new subscription was created.
 * * `subscription_cycle`: A subscription advanced into a new period.
 * * `subscription_threshold`: A subscription reached a billing threshold.
 * * `subscription_update`: A subscription was updated.
 * * `upcoming`: Reserved for upcoming invoices created through the Create Preview Invoice API or when an `invoice.upcoming` event is generated for an upcoming invoice on a subscription.
 */
export type BillingReason = ClosedEnum<typeof BillingReason>;

export const BillingReason$zodSchema = z.enum([
  "automatic_pending_invoice_item_invoice",
  "manual",
  "quote_accept",
  "subscription",
  "subscription_create",
  "subscription_cycle",
  "subscription_threshold",
  "subscription_update",
  "upcoming",
]).describe(
  "Indicates the reason why the invoice was created.\n\n* `manual`: Unrelated to a subscription, for example, created via the invoice editor.\n* `subscription`: No longer in use. Applies to subscriptions from before May 2018 where no distinction was made between updates, cycles, and thresholds.\n* `subscription_create`: A new subscription was created.\n* `subscription_cycle`: A subscription advanced into a new period.\n* `subscription_threshold`: A subscription reached a billing threshold.\n* `subscription_update`: A subscription was updated.\n* `upcoming`: Reserved for upcoming invoices created through the Create Preview Invoice API or when an `invoice.upcoming` event is generated for an upcoming invoice on a subscription.",
);

/**
 * Either `charge_automatically`, or `send_invoice`. When charging automatically, Stripe will attempt to pay this invoice using the default source attached to the customer. When sending an invoice, Stripe will email this invoice to the customer with payment instructions.
 */
export const InvoiceCollectionMethod = {
  ChargeAutomatically: "charge_automatically",
  SendInvoice: "send_invoice",
} as const;
/**
 * Either `charge_automatically`, or `send_invoice`. When charging automatically, Stripe will attempt to pay this invoice using the default source attached to the customer. When sending an invoice, Stripe will email this invoice to the customer with payment instructions.
 */
export type InvoiceCollectionMethod = ClosedEnum<
  typeof InvoiceCollectionMethod
>;

export const InvoiceCollectionMethod$zodSchema = z.enum([
  "charge_automatically",
  "send_invoice",
]).describe(
  "Either `charge_automatically`, or `send_invoice`. When charging automatically, Stripe will attempt to pay this invoice using the default source attached to the customer. When sending an invoice, Stripe will email this invoice to the customer with payment instructions.",
);

/**
 * The customer's tax exempt status. Until the invoice is finalized, this field will equal `customer.tax_exempt`. Once the invoice is finalized, this field will no longer be updated.
 */
export const CustomerTaxExempt = {
  Exempt: "exempt",
  None: "none",
  Reverse: "reverse",
} as const;
/**
 * The customer's tax exempt status. Until the invoice is finalized, this field will equal `customer.tax_exempt`. Once the invoice is finalized, this field will no longer be updated.
 */
export type CustomerTaxExempt = ClosedEnum<typeof CustomerTaxExempt>;

export const CustomerTaxExempt$zodSchema = z.enum([
  "exempt",
  "none",
  "reverse",
]).describe(
  "The customer's tax exempt status. Until the invoice is finalized, this field will equal `customer.tax_exempt`. Once the invoice is finalized, this field will no longer be updated.",
);

/**
 * The individual line items that make up the invoice. `lines` is sorted as follows: (1) pending invoice items (including prorations) in reverse chronological order, (2) subscription items in reverse chronological order, and (3) invoice items added after invoice creation in chronological order.
 */
export type InvoiceLinesList = {
  data: Array<LineItem>;
  has_more: boolean;
  url: string;
};

export const InvoiceLinesList$zodSchema: z.ZodType<InvoiceLinesList> = z.object(
  {
    data: z.array(z.lazy(() => LineItem$zodSchema)),
    has_more: z.boolean(),
    url: z.string(),
  },
).describe(
  "The individual line items that make up the invoice. `lines` is sorted as follows: (1) pending invoice items (including prorations) in reverse chronological order, (2) subscription items in reverse chronological order, and (3) invoice items added after invoice creation in chronological order.",
);

/**
 * Payments for this invoice
 */
export type InvoicesPaymentsListInvoicePayments = {
  data: Array<InvoicePayment>;
  has_more: boolean;
  url: string;
};

export const InvoicesPaymentsListInvoicePayments$zodSchema: z.ZodType<
  InvoicesPaymentsListInvoicePayments
> = z.object({
  data: z.array(z.lazy(() => InvoicePayment$zodSchema)),
  has_more: z.boolean(),
  url: z.string(),
}).describe("Payments for this invoice");

/**
 * The status of the invoice, one of `draft`, `open`, `paid`, `uncollectible`, or `void`. [Learn more](https://docs.stripe.com/billing/invoices/workflow#workflow-overview)
 */
export const InvoiceStatus = {
  Draft: "draft",
  Open: "open",
  Paid: "paid",
  Uncollectible: "uncollectible",
  Void: "void",
} as const;
/**
 * The status of the invoice, one of `draft`, `open`, `paid`, `uncollectible`, or `void`. [Learn more](https://docs.stripe.com/billing/invoices/workflow#workflow-overview)
 */
export type InvoiceStatus = ClosedEnum<typeof InvoiceStatus>;

export const InvoiceStatus$zodSchema = z.enum([
  "draft",
  "open",
  "paid",
  "uncollectible",
  "void",
]).describe(
  "The status of the invoice, one of `draft`, `open`, `paid`, `uncollectible`, or `void`. [Learn more](https://docs.stripe.com/billing/invoices/workflow#workflow-overview)",
);

/**
 * Invoices are statements of amounts owed by a customer, and are either
 *
 * @remarks
 * generated one-off, or generated periodically from a subscription.
 *
 * They contain [invoice items](https://api.stripe.com#invoiceitems), and proration adjustments
 * that may be caused by subscription upgrades/downgrades (if necessary).
 *
 * If your invoice is configured to be billed through automatic charges,
 * Stripe automatically finalizes your invoice and attempts payment. Note
 * that finalizing the invoice,
 * [when automatic](https://docs.stripe.com/invoicing/integration/automatic-advancement-collection), does
 * not happen immediately as the invoice is created. Stripe waits
 * until one hour after the last webhook was successfully sent (or the last
 * webhook timed out after failing). If you (and the platforms you may have
 * connected to) have no webhooks configured, Stripe waits one hour after
 * creation to finalize the invoice.
 *
 * If your invoice is configured to be billed by sending an email, then based on your
 * [email settings](https://dashboard.stripe.com/account/billing/automatic),
 * Stripe will email the invoice to your customer and await payment. These
 * emails can contain a link to a hosted page to pay the invoice.
 *
 * Stripe applies any customer credit on the account before determining the
 * amount due for the invoice (i.e., the amount that will be actually
 * charged). If the amount due for the invoice is less than Stripe's [minimum allowed charge
 * per currency](/docs/currencies#minimum-and-maximum-charge-amounts), the
 * invoice is automatically marked paid, and we add the amount due to the
 * customer's credit balance which is applied to the next invoice.
 *
 * More details on the customer's credit balance are
 * [here](https://docs.stripe.com/billing/customer/balance).
 *
 * Related guide: [Send invoices to customers](https://docs.stripe.com/billing/invoices/sending)
 */
export type Invoice = {
  account_country?: string | null | undefined;
  account_name?: string | null | undefined;
  account_tax_ids?: Array<TaxId> | null | undefined;
  amount_due: number;
  amount_overpaid: number;
  amount_paid: number;
  amount_remaining: number;
  amount_shipping: number;
  application?: Application | undefined;
  attempt_count: number;
  attempted: boolean;
  auto_advance: boolean;
  automatic_tax: AutomaticTax;
  automatically_finalizes_at?: number | null | undefined;
  billing_reason?: BillingReason | null | undefined;
  collection_method: InvoiceCollectionMethod;
  confirmation_secret?: InvoicesResourceConfirmationSecret | undefined;
  created: number;
  currency: string;
  custom_fields?: Array<InvoiceSettingCustomField> | null | undefined;
  customer: Customer;
  customer_account?: string | null | undefined;
  customer_address?: Address | undefined;
  customer_email?: string | null | undefined;
  customer_name?: string | null | undefined;
  customer_phone?: string | null | undefined;
  customer_shipping?: Shipping | undefined;
  customer_tax_exempt?: CustomerTaxExempt | null | undefined;
  customer_tax_ids?: Array<InvoicesResourceInvoiceTaxId> | null | undefined;
  default_payment_method?: PaymentMethod | undefined;
  default_source?: BankAccount | undefined;
  default_tax_rates: Array<TaxRate>;
  description?: string | null | undefined;
  discounts: Array<Discount>;
  due_date?: number | null | undefined;
  effective_at?: number | null | undefined;
  ending_balance?: number | null | undefined;
  footer?: string | null | undefined;
  from_invoice?: InvoicesResourceFromInvoice | undefined;
  hosted_invoice_url?: string | null | undefined;
  id: string;
  invoice_pdf?: string | null | undefined;
  issuer: ConnectAccountReference;
  last_finalization_error?: ApiErrors | undefined;
  latest_revision?: Invoice | undefined;
  lines: InvoiceLinesList;
  livemode: boolean;
  metadata?: { [k: string]: string } | null | undefined;
  next_payment_attempt?: number | null | undefined;
  number?: string | null | undefined;
  on_behalf_of?: Account | undefined;
  parent?: BillingBillResourceInvoicingParentsInvoiceParent | undefined;
  payment_settings: InvoicesPaymentSettings;
  payments?: InvoicesPaymentsListInvoicePayments | undefined;
  period_end: number;
  period_start: number;
  post_payment_credit_notes_amount: number;
  pre_payment_credit_notes_amount: number;
  receipt_number?: string | null | undefined;
  rendering?: InvoicesResourceInvoiceRendering | undefined;
  shipping_cost?: InvoicesResourceShippingCost | undefined;
  shipping_details?: Shipping | undefined;
  starting_balance: number;
  statement_descriptor?: string | null | undefined;
  status?: InvoiceStatus | null | undefined;
  status_transitions: InvoicesResourceStatusTransitions;
  subtotal: number;
  subtotal_excluding_tax?: number | null | undefined;
  test_clock?: TestHelpersTestClock | undefined;
  threshold_reason?: InvoiceThresholdReason | undefined;
  total: number;
  total_discount_amounts?:
    | Array<DiscountsResourceDiscountAmount>
    | null
    | undefined;
  total_excluding_tax?: number | null | undefined;
  total_pretax_credit_amounts?:
    | Array<InvoicesResourcePretaxCreditAmount>
    | null
    | undefined;
  total_taxes?: Array<BillingBillResourceInvoicingTaxesTax> | null | undefined;
  webhooks_delivered_at?: number | null | undefined;
};

export const Invoice$zodSchema: z.ZodType<Invoice> = z.object({
  account_country: z.string().nullable().optional(),
  account_name: z.string().nullable().optional(),
  account_tax_ids: z.array(z.lazy(() => TaxId$zodSchema)).nullable().optional(),
  amount_due: z.int(),
  amount_overpaid: z.int(),
  amount_paid: z.int(),
  amount_remaining: z.int(),
  amount_shipping: z.int(),
  application: Application$zodSchema.optional(),
  attempt_count: z.int(),
  attempted: z.boolean(),
  auto_advance: z.boolean(),
  automatic_tax: z.lazy(() => AutomaticTax$zodSchema),
  automatically_finalizes_at: z.int().nullable().optional(),
  billing_reason: BillingReason$zodSchema.nullable().optional(),
  collection_method: InvoiceCollectionMethod$zodSchema,
  confirmation_secret: InvoicesResourceConfirmationSecret$zodSchema.optional(),
  created: z.int(),
  currency: z.string(),
  custom_fields: z.array(InvoiceSettingCustomField$zodSchema).nullable()
    .optional(),
  customer: z.lazy(() => Customer$zodSchema),
  customer_account: z.string().nullable().optional(),
  customer_address: Address$zodSchema.optional(),
  customer_email: z.string().nullable().optional(),
  customer_name: z.string().nullable().optional(),
  customer_phone: z.string().nullable().optional(),
  customer_shipping: Shipping$zodSchema.optional(),
  customer_tax_exempt: CustomerTaxExempt$zodSchema.nullable().optional(),
  customer_tax_ids: z.array(InvoicesResourceInvoiceTaxId$zodSchema).nullable()
    .optional(),
  default_payment_method: z.lazy(() => PaymentMethod$zodSchema).optional(),
  default_source: z.lazy(() => BankAccount$zodSchema).optional(),
  default_tax_rates: z.array(TaxRate$zodSchema),
  description: z.string().nullable().optional(),
  discounts: z.array(z.lazy(() => Discount$zodSchema)),
  due_date: z.int().nullable().optional(),
  effective_at: z.int().nullable().optional(),
  ending_balance: z.int().nullable().optional(),
  footer: z.string().nullable().optional(),
  from_invoice: z.lazy(() => InvoicesResourceFromInvoice$zodSchema).optional(),
  hosted_invoice_url: z.string().nullable().optional(),
  id: z.string(),
  invoice_pdf: z.string().nullable().optional(),
  issuer: z.lazy(() => ConnectAccountReference$zodSchema),
  last_finalization_error: z.lazy(() => ApiErrors$zodSchema).optional(),
  latest_revision: z.lazy(() => Invoice$zodSchema).optional(),
  lines: z.lazy(() => InvoiceLinesList$zodSchema),
  livemode: z.boolean(),
  metadata: z.record(z.string(), z.string()).nullable().optional(),
  next_payment_attempt: z.int().nullable().optional(),
  number: z.string().nullable().optional(),
  on_behalf_of: z.lazy(() => Account$zodSchema).optional(),
  parent: z.lazy(() =>
    BillingBillResourceInvoicingParentsInvoiceParent$zodSchema
  ).optional(),
  payment_settings: InvoicesPaymentSettings$zodSchema,
  payments: z.lazy(() => InvoicesPaymentsListInvoicePayments$zodSchema)
    .optional(),
  period_end: z.int(),
  period_start: z.int(),
  post_payment_credit_notes_amount: z.int(),
  pre_payment_credit_notes_amount: z.int(),
  receipt_number: z.string().nullable().optional(),
  rendering: InvoicesResourceInvoiceRendering$zodSchema.optional(),
  shipping_cost: InvoicesResourceShippingCost$zodSchema.optional(),
  shipping_details: Shipping$zodSchema.optional(),
  starting_balance: z.int(),
  statement_descriptor: z.string().nullable().optional(),
  status: InvoiceStatus$zodSchema.nullable().optional(),
  status_transitions: InvoicesResourceStatusTransitions$zodSchema,
  subtotal: z.int(),
  subtotal_excluding_tax: z.int().nullable().optional(),
  test_clock: TestHelpersTestClock$zodSchema.optional(),
  threshold_reason: InvoiceThresholdReason$zodSchema.optional(),
  total: z.int(),
  total_discount_amounts: z.array(
    z.lazy(() => DiscountsResourceDiscountAmount$zodSchema),
  ).nullable().optional(),
  total_excluding_tax: z.int().nullable().optional(),
  total_pretax_credit_amounts: z.array(
    z.lazy(() => InvoicesResourcePretaxCreditAmount$zodSchema),
  ).nullable().optional(),
  total_taxes: z.array(BillingBillResourceInvoicingTaxesTax$zodSchema)
    .nullable().optional(),
  webhooks_delivered_at: z.int().nullable().optional(),
}).describe(
  "Invoices are statements of amounts owed by a customer, and are either\ngenerated one-off, or generated periodically from a subscription.\n\nThey contain [invoice items](https://api.stripe.com#invoiceitems), and proration adjustments\nthat may be caused by subscription upgrades/downgrades (if necessary).\n\nIf your invoice is configured to be billed through automatic charges,\nStripe automatically finalizes your invoice and attempts payment. Note\nthat finalizing the invoice,\n[when automatic](https://docs.stripe.com/invoicing/integration/automatic-advancement-collection), does\nnot happen immediately as the invoice is created. Stripe waits\nuntil one hour after the last webhook was successfully sent (or the last\nwebhook timed out after failing). If you (and the platforms you may have\nconnected to) have no webhooks configured, Stripe waits one hour after\ncreation to finalize the invoice.\n\nIf your invoice is configured to be billed by sending an email, then based on your\n[email settings](https://dashboard.stripe.com/account/billing/automatic),\nStripe will email the invoice to your customer and await payment. These\nemails can contain a link to a hosted page to pay the invoice.\n\nStripe applies any customer credit on the account before determining the\namount due for the invoice (i.e., the amount that will be actually\ncharged). If the amount due for the invoice is less than Stripe's [minimum allowed charge\nper currency](/docs/currencies#minimum-and-maximum-charge-amounts), the\ninvoice is automatically marked paid, and we add the amount due to the\ncustomer's credit balance which is applied to the next invoice.\n\nMore details on the customer's credit balance are\n[here](https://docs.stripe.com/billing/customer/balance).\n\nRelated guide: [Send invoices to customers](https://docs.stripe.com/billing/invoices/sending)",
);
