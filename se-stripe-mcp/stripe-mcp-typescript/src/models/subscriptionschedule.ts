/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { ClosedEnum } from "../types/enums.js";
import { Application, Application$zodSchema } from "./application.js";
import { Customer, Customer$zodSchema } from "./customer.js";
import { Subscription, Subscription$zodSchema } from "./subscription.js";
import {
  SubscriptionScheduleCurrentPhase,
  SubscriptionScheduleCurrentPhase$zodSchema,
} from "./subscriptionschedulecurrentphase.js";
import {
  SubscriptionSchedulePhaseConfiguration,
  SubscriptionSchedulePhaseConfiguration$zodSchema,
} from "./subscriptionschedulephaseconfiguration.js";
import {
  SubscriptionSchedulesResourceDefaultSettings,
  SubscriptionSchedulesResourceDefaultSettings$zodSchema,
} from "./subscriptionschedulesresourcedefaultsettings.js";
import {
  SubscriptionsResourceBillingMode,
  SubscriptionsResourceBillingMode$zodSchema,
} from "./subscriptionsresourcebillingmode.js";
import {
  TestHelpersTestClock,
  TestHelpersTestClock$zodSchema,
} from "./testhelperstestclock.js";

/**
 * Behavior of the subscription schedule and underlying subscription when it ends. Possible values are `release` or `cancel` with the default being `release`. `release` will end the subscription schedule and keep the underlying subscription running. `cancel` will end the subscription schedule and cancel the underlying subscription.
 */
export const EndBehavior = {
  Cancel: "cancel",
  None: "none",
  Release: "release",
  Renew: "renew",
} as const;
/**
 * Behavior of the subscription schedule and underlying subscription when it ends. Possible values are `release` or `cancel` with the default being `release`. `release` will end the subscription schedule and keep the underlying subscription running. `cancel` will end the subscription schedule and cancel the underlying subscription.
 */
export type EndBehavior = ClosedEnum<typeof EndBehavior>;

export const EndBehavior$zodSchema = z.enum([
  "cancel",
  "none",
  "release",
  "renew",
]).describe(
  "Behavior of the subscription schedule and underlying subscription when it ends. Possible values are `release` or `cancel` with the default being `release`. `release` will end the subscription schedule and keep the underlying subscription running. `cancel` will end the subscription schedule and cancel the underlying subscription.",
);

/**
 * The present status of the subscription schedule. Possible values are `not_started`, `active`, `completed`, `released`, and `canceled`. You can read more about the different states in our [behavior guide](https://docs.stripe.com/billing/subscriptions/subscription-schedules).
 */
export const SubscriptionScheduleStatus = {
  Active: "active",
  Canceled: "canceled",
  Completed: "completed",
  NotStarted: "not_started",
  Released: "released",
} as const;
/**
 * The present status of the subscription schedule. Possible values are `not_started`, `active`, `completed`, `released`, and `canceled`. You can read more about the different states in our [behavior guide](https://docs.stripe.com/billing/subscriptions/subscription-schedules).
 */
export type SubscriptionScheduleStatus = ClosedEnum<
  typeof SubscriptionScheduleStatus
>;

export const SubscriptionScheduleStatus$zodSchema = z.enum([
  "active",
  "canceled",
  "completed",
  "not_started",
  "released",
]).describe(
  "The present status of the subscription schedule. Possible values are `not_started`, `active`, `completed`, `released`, and `canceled`. You can read more about the different states in our [behavior guide](https://docs.stripe.com/billing/subscriptions/subscription-schedules).",
);

/**
 * A subscription schedule allows you to create and manage the lifecycle of a subscription by predefining expected changes.
 *
 * @remarks
 *
 * Related guide: [Subscription schedules](https://docs.stripe.com/billing/subscriptions/subscription-schedules)
 */
export type SubscriptionSchedule = {
  application?: Application | undefined;
  billing_mode: SubscriptionsResourceBillingMode;
  canceled_at?: number | null | undefined;
  completed_at?: number | null | undefined;
  created: number;
  current_phase?: SubscriptionScheduleCurrentPhase | undefined;
  customer: Customer;
  customer_account?: string | null | undefined;
  default_settings: SubscriptionSchedulesResourceDefaultSettings;
  end_behavior: EndBehavior;
  id: string;
  livemode: boolean;
  metadata?: { [k: string]: string } | null | undefined;
  phases: Array<SubscriptionSchedulePhaseConfiguration>;
  released_at?: number | null | undefined;
  released_subscription?: string | null | undefined;
  status: SubscriptionScheduleStatus;
  subscription?: Subscription | undefined;
  test_clock?: TestHelpersTestClock | undefined;
};

export const SubscriptionSchedule$zodSchema: z.ZodType<SubscriptionSchedule> = z
  .object({
    application: Application$zodSchema.optional(),
    billing_mode: SubscriptionsResourceBillingMode$zodSchema,
    canceled_at: z.int().nullable().optional(),
    completed_at: z.int().nullable().optional(),
    created: z.int(),
    current_phase: SubscriptionScheduleCurrentPhase$zodSchema.optional(),
    customer: z.lazy(() => Customer$zodSchema),
    customer_account: z.string().nullable().optional(),
    default_settings: z.lazy(() =>
      SubscriptionSchedulesResourceDefaultSettings$zodSchema
    ),
    end_behavior: EndBehavior$zodSchema,
    id: z.string(),
    livemode: z.boolean(),
    metadata: z.record(z.string(), z.string()).nullable().optional(),
    phases: z.array(
      z.lazy(() => SubscriptionSchedulePhaseConfiguration$zodSchema),
    ),
    released_at: z.int().nullable().optional(),
    released_subscription: z.string().nullable().optional(),
    status: SubscriptionScheduleStatus$zodSchema,
    subscription: z.lazy(() => Subscription$zodSchema).optional(),
    test_clock: TestHelpersTestClock$zodSchema.optional(),
  }).describe(
    "A subscription schedule allows you to create and manage the lifecycle of a subscription by predefining expected changes.\n\nRelated guide: [Subscription schedules](https://docs.stripe.com/billing/subscriptions/subscription-schedules)",
  );
