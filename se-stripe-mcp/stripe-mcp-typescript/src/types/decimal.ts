/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { Decimal } from "decimal.js";
import * as z from "zod/v4";

export { Decimal };

export function decimal() {
  return z.union([
    z.custom<Decimal>((val) => val instanceof Decimal),
    z.number().transform((v) => new Decimal(v)),
    z.string().transform((v, ctx) => {
      try {
        return new Decimal(v);
      } catch {
        ctx.addIssue({
          code: z.ZodIssueCode.custom,
          message: "Invalid decimal value",
        });
        return z.NEVER;
      }
    }),
  ]);
}

export function decimalStr() {
  return z.union([
    z.custom<Decimal>((val) => val instanceof Decimal).transform((v) =>
      v.toString()
    ),
    z.string().transform((v, ctx) => {
      try {
        return new Decimal(v);
      } catch {
        ctx.addIssue({
          code: z.ZodIssueCode.custom,
          message: "Invalid Decimal string",
        });
        return z.NEVER;
      }
    }),
    z.union([z.null(), z.undefined()]).transform(() => new Decimal(0)),
  ]);
}

export function decimalOptional() {
  return z.union([
    z.custom<Decimal>((val) => val instanceof Decimal),
    z.number().transform((v) => new Decimal(v)),
    z.string().transform((v, ctx) => {
      try {
        return new Decimal(v);
      } catch {
        ctx.addIssue({
          code: z.ZodIssueCode.custom,
          message: "Invalid decimal value",
        });
        return z.NEVER;
      }
    }),
    z.undefined(),
    z.null().transform(() => undefined),
  ]);
}

export function decimalNullable() {
  return z.union([
    z.custom<Decimal>((val) => val instanceof Decimal),
    z.number().transform((v) => new Decimal(v)),
    z.string().transform((v, ctx) => {
      try {
        return new Decimal(v);
      } catch {
        ctx.addIssue({
          code: z.ZodIssueCode.custom,
          message: "Invalid decimal value",
        });
        return z.NEVER;
      }
    }),
    z.null(),
    z.undefined().transform(() => null),
  ]);
}

export function decimalStrOptional() {
  return z.union([
    z.custom<Decimal>((val) => val instanceof Decimal).transform((v) =>
      v.toString()
    ),
    z.string().transform((v, ctx) => {
      try {
        return new Decimal(v);
      } catch {
        ctx.addIssue({
          code: z.ZodIssueCode.custom,
          message: "Invalid Decimal string",
        });
        return z.NEVER;
      }
    }),
    z.undefined(),
    z.null().transform(() => undefined),
  ]);
}

export function decimalStrNullable() {
  return z.union([
    z.custom<Decimal>((val) => val instanceof Decimal).transform((v) =>
      v.toString()
    ),
    z.string().transform((v, ctx) => {
      try {
        return new Decimal(v);
      } catch {
        ctx.addIssue({
          code: z.ZodIssueCode.custom,
          message: "Invalid Decimal string",
        });
        return z.NEVER;
      }
    }),
    z.null(),
    z.undefined().transform(() => null),
  ]);
}

export function decimalConst<T extends Decimal>(value: T) {
  return z
    .union([
      z.custom<Decimal>((val) => val instanceof Decimal),
      z.number().transform((v) => new Decimal(v)),
      z.string().transform((v, ctx) => {
        try {
          return new Decimal(v);
        } catch {
          ctx.addIssue({
            code: z.ZodIssueCode.custom,
            message: "Invalid decimal value",
          });
          return z.NEVER;
        }
      }),
    ])
    .refine((v) => v.equals(value), {
      message: `Value must be ${value.toString()}`,
    })
    .transform(() => value as T);
}

export function decimalStrConst<T extends Decimal>(value: T) {
  return z
    .union([
      z.custom<Decimal>((val) => val instanceof Decimal),
      z.string().transform((v, ctx) => {
        try {
          return new Decimal(v);
        } catch {
          ctx.addIssue({
            code: z.ZodIssueCode.custom,
            message: "Invalid decimal string",
          });
          return z.NEVER;
        }
      }),
    ])
    .refine((v) => v.equals(value), {
      message: `Value must be ${value.toString()}`,
    })
    .transform(() => value as T);
}
